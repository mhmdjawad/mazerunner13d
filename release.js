let f=32,q=10,u=10;const v=Math.floor;
var y={Za:[{l:[0,0,140,0,0,0,140,0,0,255,158,158,158,0,0,0,0,51,2,1,2,58,239,0,32,88,1,157,2],p:[1,1,1,1],c:[{n:[161,,,,,,,,,,,,,,,,163,,,,,,,,159],f:[]}]},{l:[0,91,128,0,0,95,128,12,0,0,12,0,72,0,0,0,0,0,0,0,2,255,0,0,32,83,3,130,4],p:[1,1,2,1],c:[{n:[144,,151,,149,,147,,146,,147,,146,,144,,144,,151,,149,,147,,146,,147,,146,,144],f:[]},{n:[156,,163,,161,,159,,158,,159,,158,,156,,156,,163,,161,,159,,158,,159,,158,,168],f:[]}]},{l:[0,16,133,0,0,28,126,12,0,0,2,0,60,0,0,0,0,0,0,0,2,91,0,0,32,47,3,157,
2],p:[1,2,1,2],c:[{n:[144,,151,,149,,147,,146,,147,,146,,144,,144,,151,,149,,147,,146,,147,,146,,144],f:[]},{n:[168,,175,,173,,171,,170,,171,,170,,168,,168,,175,,173,,171,,170,,171,,170,,168],f:[]}]},{l:[0,255,116,79,0,255,116,0,83,0,4,6,69,52,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],p:[1,1,1,1],c:[{n:[144,,151,,149,,147,,146,,147,,146,,144,,144,,151,,149,,147,,146,,147,,146,,144,,,159,,,,159,,,,159,,,,,,,,,,,,159,,159],f:[]}]}],Ga:8269,Ea:32,Ka:3,Sa:4};
function aa(a){a.Y=y;a.na=y.Ka;a.fa=0;a.X=y.Ga*y.Ea*(a.na+1)*2;a.S=new Int32Array(a.X)}
function ba(a,b,c){aa(a);var d=()=>{var e,g,k,h,l,p=new Int32Array(a.X);const n=a.Y.Za[a.fa],m=a.Y.Ga,w=a.Y.Ea;let x=0,O=0;var A=!1;const P=[];for(g=0;g<=a.na;++g){var D=n.p[g];for(k=0;k<w;++k){if(l=D?n.c[D-1].f[k]:0)n.l[l-1]=n.c[D-1].f[k+w]||0,17>l&&(P.length=0);const Ea=a.oa[n.l[16]],Fa=n.l[17]/512,Ga=2**(n.l[18]-9)/m,Ha=n.l[19],ia=n.l[20],Ia=135.82764118168*n.l[21]/44100,Ja=1-n.l[22]/255,V=1E-5*n.l[23],Ka=n.l[24]/32,La=n.l[25]/512,Ma=6.283184*2**(n.l[26]-9)/m,ja=n.l[27]/255,W=n.l[28]*m&-2;l=(g*
w+k)*m;for(h=0;4>h;++h)if(e=D?n.c[D-1].n[k+h*w]:0){if(!P[e]){var r=e;var t=n;var E=e;const Na=a.oa[t.l[0]],Oa=t.l[1],Pa=t.l[3]/32,Qa=a.oa[t.l[4]],Ra=t.l[5],Sa=t.l[8]/32,ka=t.l[9],I=t.l[10]*t.l[10]*4,Q=t.l[11]*t.l[11]*4,X=t.l[12]*t.l[12]*4,Ta=1/X,Ua=-t.l[13]/16;let K=t.l[14];const Va=m*2**(2-t.l[15]),la=new Int32Array(I+Q+X);let ma=0,na=0,oa=0,pa=0;for(let F=0,Y=0;F<I+Q+X;F++,Y++){0<=Y&&(K=K>>8|(K&255)<<4,Y-=Va,oa=.003959503758*2**((E+(K&15)+t.l[2]-128-128)/12),pa=.003959503758*2**((E+(K&15)+t.l[6]-
128-128)/12)*(1+8E-4*t.l[7]));let B=1;F<I?B=F/I:F>=I+Q&&(B=(F-I-Q)*Ta,B=(1-B)*3**(Ua*B));ma+=oa*B**Pa;let Z=Na(ma)*Oa;na+=pa*B**Sa;Z+=Qa(na)*Ra;ka&&(Z+=(2*Math.random()-1)*ka);la[F]=80*Z*B|0}P[r]=la}t=P[e];e=0;for(r=2*l;e<t.length;e++,r+=2)p[r]+=t[e]}for(e=0;e<m;e++)h=2*(l+e),(r=p[h])||A?(A=Ia,Ha&&(A*=Ea(Ga*h)*Fa+.5),A=1.5*Math.sin(A),x+=A*O,r=Ja*(r-O)-x,O+=A*r,r=3==ia?O:1==ia?r:x,V&&(r*=V,r=1>r?-1<r?a.Da(.25*r):-1:1,r/=V),r*=Ka,A=1E-5<r*r,t=Math.sin(Ma*h)*La+.5,E=r*(1-t),r*=t):E=0,h>=W&&(E+=p[h-
W+1]*ja,r+=p[h-W]*ja),p[h]=E|0,p[h+1]=r|0,a.S[h]+=E|0,a.S[h+1]+=r|0}}a.fa++;if(1==a.fa/a.Y.Sa){g=b.createBuffer(2,a.X/2,44100);for(k=0;2>k;k++)for(D=g.getChannelData(k),p=k;p<a.X;p+=2)D[p>>1]=a.S[p]/65536;return c(g)}requestAnimationFrame(d)};requestAnimationFrame(d)}
class ca{constructor(){this.oa=[this.Da,this.Ua,this.Ta,this.Va];this.Y=null;this.X=this.fa=this.na=0;this.S=null}Da(a){return Math.sin(6.283184*a)}Ta(a){return a%1*2-1}Ua(a){return.5>a%1?1:-1}Va(a){a=a%1*4;return 2>a?a-1:3-a}getData(a,b){const c=2*Math.floor(44100*a),d=Array(b);for(let e=0;e<2*b;e+=1){const g=c+e;d[e]=0<a&&g<this.S.length?this.S[g]/32768:0}return d}}
function da(a){const b=a.L.sampleRate;a=a.L.createBuffer(1,.3*b,b).getChannelData(0);for(var c=0;c<a.length;c++)a[c]=2*(Math.random()-.5);c=.29-.1;for(let d=0;d<a.length;d++){let e=d/b;.01>e?a[d]*=e/.01:.11>e?a[d]*=1-(e-.01)/.1*.8:e>.3-c&&(a[d]*=(.3-e)/c)}for(c=0;c<a.length;c++)a[c]*=Math.sin(c/b*Math.PI*2*(440+100*Math.random()))}
function ea(a){const b=a.L.sampleRate;a=a.L.createBuffer(1,.5*b,b).getChannelData(0);for(var c=0;c<a.length;c++)a[c]=2*Math.random()-1;for(c=0;c<a.length;c++){let d=c/b;.05>d?a[c]*=d/.05:.25>d?a[c]*=1-(d-.05)/.2:.25<d&&(a[c]*=(.5-d)/.25)}}function fa(a){a.I&&(a.I.stop(),a.I=null);a.wa&&(a.I=a.L.createBufferSource(),a.I.buffer=a.wa,a.I.connect(a.L.destination),a.I.loop=!0,a.I.start(0,a.pa),a.startTime=a.L.currentTime-a.pa)}
function ha(a){a.I&&(a.pa=a.L.currentTime-a.startTime,a.I.stop(),a.I=null)}class qa{constructor(){this.L=new (window.AudioContext||window.webkitAudioContext);new (window.AudioContext||window.webkitAudioContext);da(this);ea(this);var a=new ca;this.startTime=this.pa=0;ba(a,this.L,b=>{this.wa=b;fa(this)})}}function ra(a){for(let b=0;b<a.rows;b++)for(let c=0;c<a.cols;c++)a.grid[b][c]=!0}
function sa(a,b,c){a.grid[b][c]=!1;var d=[[-2,0],[2,0],[0,-2],[0,2]];for(var e=d.length-1;0<e;e--){const g=Math.floor(Math.random()*(e+1));[d[e],d[g]]=[d[g],d[e]]}for(const g of d)d=b+g[0],e=c+g[1],0<=d&&d<a.rows&&0<=e&&e<a.cols&&a.grid[d][e]&&(a.grid[b+g[0]/2][c+g[1]/2]=!1,sa(a,d,e))}
class ta{constructor(a,b){this.rows=a;this.cols=b;this.grid=Array(a).fill(null).map(()=>Array(b).fill(!0));ra(this);sa(this,0,0);for(var c=0;c<this.rows;c++)this.grid[c][b-1]=!1;a=Array(a+2).fill(null).map(()=>Array(b+2).fill(!0));for(c=0;c<this.rows;c++)for(var d=0;d<this.cols;d++)a[c+1][d+1]=this.grid[c][d]}}function ua(a,b){let c=a[0],d=b[c[0]][c[1]];for(const e of a){const [g,k]=e;b[g][k]<d&&(c=e,d=b[g][k])}return c}
function va(a,b){const c=[b];for(;a.hasOwnProperty(`${b[0]}-${b[1]}`);)b=a[`${b[0]}-${b[1]}`],c.unshift(b);return c}function wa(a,b,c){const d=[];0<b&&d.push([b-1,c]);b<a.rows-1&&d.push([b+1,c]);0<c&&d.push([b,c-1]);c<a.cols-1&&d.push([b,c+1]);return d}
class xa{constructor(a){this.Oa=a;this.rows=a.length;this.cols=a[0].length}ka(a,b,c,d){a=Math.floor(a);b=Math.floor(b);c=Math.floor(c);d=Math.floor(d);const e=[],g=new Set,k={},h=Array(this.rows).fill(null).map(()=>Array(this.cols).fill(Infinity));h[a][b]=0;const l=Array(this.rows).fill(null).map(()=>Array(this.cols).fill(Infinity));l[a][b]=Math.abs(a-c)+Math.abs(b-d);for(e.push([a,b]);0<e.length;){a=ua(e,l);const [p,n]=a;if(p===c&&n===d)return va(k,a);e.splice(e.indexOf(a),1);g.add(`${p}-${n}`);
b=wa(this,p,n);for(const m of b){const [w,x]=m;g.has(`${w}-${x}`)||this.Oa[w][x]||(b=h[p][n]+1,b<h[w][x]&&(k[`${w}-${x}`]=a,h[w][x]=b,l[w][x]=b+(Math.abs(w-c)+Math.abs(x-d)),e.includes(m)||e.push(m)))}}return null}}
function z(a=0,b=0){let c=document.createElement("canvas");c.width=a;c.height=b;c.w=a;c.u=b;c.h=c.getContext("2d");c.ab={x:a/2,y:b/2};c.clear=()=>{c.h.clearRect(0,0,a,b)};c.fill=d=>{c.h.fillStyle=d;c.h.fillRect(0,0,a,b)};c.La=d=>{d=c.h.createPattern(d,"repeat");c.h.fillStyle=d;c.h.fillRect(0,0,a,b)};return c}
function C(a,b){var c="";for(var d=0;d<a;d++){c+="<tr>";for(var e=0;e<b;e++)c+="<td></td>";c+="</tr>"}a=document.createElement("table");a.innerHTML=c;c=[];b=a.querySelectorAll("tr");for(e=0;e<b.length;e++)d=b[e].querySelectorAll("td"),d.forEach(g=>g.G=k=>g.innerHTML=k),c[e]=[...d];a.U=c;return a}function G(a){return new ya(a)}
function H(a,b,c=1.3){let d=z(b,b);var e=d.h;e.font=`${b/c}px ${"sans-serif"}`;e.textAlign="center";e.textBaseline="middle";e.fillStyle="#000";e.fillText(a,b/2,1.1*b/2);return d}function za(){var a=H("\ud83c\udf6a",f/2,1.1);let b=z(a.width,a.height);b.h.globalAlpha=.3;b.h.drawImage(a,0,0);b.h.globalAlpha=1;return b}function J(a){var b=document.createElement("div");b.innerHTML=a;return b.firstChild}
function Aa(a){for(let b=a.length-1;0<b;b--){const c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}return a}function Ba(a,b,c=0){0==c&&(c=b);b=z(a.width*c,a.height*b);a=b.h.createPattern(a,"repeat");b.h.fillStyle=a;b.h.fillRect(0,0,b.w,b.u);return b}function Ca(a,b,c=.3,d=8,e=8){var g=z(d,e),k=g.h;k.fillStyle=a;k.fillRect(0,0,g.width,g.height);k.fillStyle=b;for(a=0;a<e;a++)for(b=0;b<d;b++)Math.random()<c&&k.fillRect(a,b,1,1);return g}
function Da(a){var b=z(2*a+2,2*a+2),c=b.h;c.beginPath();c.arc(b.width/2,b.height/2,a,0,2*Math.PI,!1);c.strokeStyle="#11009ead";c.stroke();c.fillStyle="#b2a9ff91";c.fill();return b}function Wa(a){var b="spritesheet.gif?"+Math.random(),c=new Image;c.src=b;c.addEventListener("load",()=>{a(c)})}
function Xa(a,b){for(var c=a.getContext("2d").getImageData(0,0,a.width,a.height).data,d=[],e=0;e<c.length;e+=4){var g=d,k=g.push;var h=c[e];var l=c[e+1],p=c[e+2];h=0==h+l+p+c[e+3]?null:0==h+l+p||255<h||255<l||255<p?"#000000":"#"+((h<<16)+(l<<8)+p).toString(16).padStart(6,"0");k.call(g,h)}c=[];for(e=0;e<a.height;e++)c[e]=[];g=e=0;for(k=0;k<d.length;k++)e>=a.width&&(g++,e=0),c[g][e]=d[k],b&&(c[g][e]=b(c[g][e])),e++;return c}function L(a){var b=z(a.width,a.height);b.h.drawImage(a,0,0);return b}
function Ya(a,b=1){let c=a.length,d=Math.max(...a.map(h=>h.length));var e=z(d*b,c*b),g=e.h;for(let h=0;h<c;h++)for(let l=0;l<d;l++){var k=a[h][l];k&&""!=k&&(g.fillStyle=k,g.fillRect(l*b,h*b,b,b))}return e}function M(a,b,c,d,e){let g=z(d,e);g.h.drawImage(a,b,c,d,e,0,0,d,e);return g}function Za(a=1,b=0){return b+(a-b)*Math.random()}function $a(a=1,b=0){return Za(a,b)|0}function ab(a,b,c=1){var d=a.y==b.y?0:a.y<b.y?c:-c;a.x+=a.x==b.x?0:a.x<b.x?c:-c;a.y+=d}
function N(a,b){let c;c=0+Math.pow(a.x-b.x,2);c+=Math.pow(a.y-b.y,2);return c=Math.sqrt(c)}class ya{constructor(a){this.x=a.x;this.y=a.y}}
function bb(a){a=L(a);var b=[],c=f/16,d=M(a,4*c,12*c,4*c,4*c),e=M(a,8*c,12*c,4*c,4*c),g=M(a,12*c,0,4*c,16*c);a.h.clearRect(4*c,12*c,4*c,4*c);a.h.clearRect(8*c,12*c,4*c,4*c);a.h.clearRect(12*c,0,4*c,16*c);var k=[{C:-1,D:0,H:-1},{C:0,D:0,H:0},{C:0,D:-1,H:1},{C:0,D:-1,H:1},{C:0,D:0,H:0}];for(let p in k){var h=k[p],l=L(a);l.h.drawImage(d,4*c,12*c+c*h.C);l.h.drawImage(e,8*c,12*c+c*h.D);l.h.drawImage(g,12*c,c*h.H);b.push(l)}return b}
function cb(a){var b=L(a),c=L(a);a=[];var d=f/16,e=[{n:"LegL",x:4*d,y:12*d,w:4*d,u:4*d,A:null},{n:"LegR",x:8*d,y:12*d,w:4*d,u:4*d,A:null},{n:"HandL",x:0,y:8*d,w:4*d,u:4*d,A:null},{n:"HandR",x:12*d,y:8*d,w:4*d,u:4*d,A:null}];e.forEach(m=>{m.A=M(b,m.x,m.y,m.w,m.u);c.h.clearRect(m.x,m.y,m.w,m.u)});var g=e.find(m=>"LegL"==m.n),k=e.find(m=>"LegR"==m.n),h=e.find(m=>"HandL"==m.n);e=e.find(m=>"HandR"==m.n);var l=[{C:-1,D:0,H:-1},{C:0,D:0,H:0},{C:0,D:-1,H:1},{C:0,D:-1,H:1},{C:0,D:0,H:0}];for(let m in l){var p=
l[m],n=z(c.w,c.u);n.h.drawImage(g.A,g.x,g.y+d*p.C);n.h.drawImage(k.A,k.x,k.y+d*p.D);n.h.drawImage(h.A,h.x,h.y+d*p.C);n.h.drawImage(e.A,e.x,e.y+d*p.D);n.h.drawImage(c,0,0);a.push(n)}return a}function db(){var a=z(f,f),b=a.h;b.fillStyle="#fff";b.fillRect(0,0,a.w,a.u);b.clearRect(2,2,a.w-4,a.u-4);b.clearRect(f/4,0,f/2,f);b.clearRect(0,f/4,f,f/2);return a}
class eb{constructor(a){a=L(a);var b=Xa(a,c=>""==c||"#fff"==c||"#ffffff"==c?null:c);a=f/16;b=Ya(b,a);this.i=M(b,0*a,0,16*a,16*a);this.Qa=M(b,16*a,0,16*a,16*a);this.V=bb(this.Qa);this.Fa=cb(this.i);this.cursor=db();H("\ud83c\udff0",f,1.1)}}function fb(a){var b=a.g.i.j;N(a.j,b)<=f/2&&(a.g.i.N-=a.Ya,0>=a.g.i.N&&(a.g.i.N=0,gb(a.g)));b=a.g.ka(a.destination,b);return null!=b&&1<b.length?G(hb({x:b[1][1],y:b[1][0]})):G(a.destination)}
class ib{constructor(a,b){this.g=a;this.V=a.Z.V;this.o=0;this.s=this.V[this.o];this.j=G(b);this.destination=G(this.j);this.target=fb(this);this.ha=this.Ya=2;this.speed=f/16;this.time=0;this.W=16;this.la=0;this.$a=2}update(a){this.la++;this.o++;this.s=this.V[Math.floor(this.o/this.W)];this.o>(this.V.length-1)*this.W&&(this.o=0);this.la>=this.$a&&(this.move(),this.la=0);a=C(5,5);a=a.U;a[0][0].innerHTML="pos";a[1][0].innerHTML="destination";a[2][0].innerHTML="target";a[0][1].innerHTML=`${this.j.x}`;
a[1][1].innerHTML=`${this.destination.x}`;a[2][1].innerHTML=`${this.target.x}`;a[0][2].innerHTML=`${this.j.y}`;a[1][2].innerHTML=`${this.destination.y}`;a[2][2].innerHTML=`${this.target.y}`}move(){N(this.j,this.destination)<=this.speed?(this.target=fb(this),this.destination=G(this.target)):N(this.j,this.destination)>=this.speed?ab(this.j,this.destination,this.speed):this.j=G(this.destination)}ca(a){a.drawImage(this.s,this.j.x-this.s.w/2,this.j.y-this.s.u/2)}}
class jb{constructor(a,b){this.g=a;this.j=G(b);this.ha=500;this.counter=this.ya=this.time=0;this.Ja=13}update(a){this.ya++;this.ya>this.ha&&this.counter<this.Ja&&(this.ha+=100,this.counter++,this.time=a,a=new ib(this.g,this.j),this.g.v.push(a))}ca(){}}function kb(a,b){switch(b.toLowerCase()){case "a":a.a=!1;break;case "w":a.w=!1;break;case "s":a.A=!1;break;case "d":a.d=!1}}
function lb(a,b){switch(b.toLowerCase()){case "a":a.a=!0;a.d=!1;break;case "w":a.w=!0;a.A=!1;break;case "s":a.A=!0;a.w=!1;break;case "d":a.d=!0,a.a=!1}}class R{constructor(){this.d=this.A=this.a=this.w=!1}}function mb(a){window.addEventListener("keydown",b=>{lb(a.keys,b.key)});window.addEventListener("keyup",b=>{kb(a.keys,b.key)})}function nb(a,b){a.j=G(b);a.destination=G(b);a.keys=new R}
function ob(a,b,c){var d=a.j.x-a.s.w/2,e=a.j.y-a.s.u/2,g=a.g.buffer.w,k=a.g.buffer.u;a=Math.max(d-b/2,0);var h=Math.max(e-c/2,0);a+b>g&&(a=g-b);h+c>k&&(h=k-c);var l=C(6,6).U;l[0][0].innerHTML="n";l[0][1].innerHTML="x";l[0][2].innerHTML="y";l[1][0].innerHTML="player";l[1][1].innerHTML=`${d}`;l[1][2].innerHTML=`${e}`;l[2][0].innerHTML="camera";l[2][1].innerHTML=`${a}`;l[2][2].innerHTML=`${h}`;l[3][0].innerHTML="buffer";l[3][1].innerHTML=`${g}`;l[3][2].innerHTML=`${k}`;l[2][0].innerHTML="camera+h";l[2][1].innerHTML=
`${a+b}`;l[2][2].innerHTML=`${h+c}`;return{x:a,y:h}}
class pb{constructor(a,b){this.g=a;this.j=G(b);this.destination=G(b);this.s=a.Z.i;this.F=a.Z.Fa;this.o=0;this.W=5;this.speed=f/16;this.keys=new R;this.N=100;mb(this)}update(){this.g.qa.innerHTML=this.N;if(N(this.destination,this.j)>this.speed)ab(this.j,this.destination,this.speed),this.s=this.F[Math.floor(this.o/this.W)],this.o++,this.o>(this.F.length-1)*this.W&&(this.o=0);else{this.s=this.F[1];this.j=G(this.destination);var a=G(this.destination),b=0,c=0;this.keys.w&&(c=-f);this.keys.A&&(c=f);this.keys.a&&
(b=-f);this.keys.d&&(b=f);if(0!=b&&0!=c){a=G(this.destination);a.x+=b;b=G(this.destination);b.y+=c;c=S(this.g,a);var d=S(this.g,b);c&&d||c?this.destination=G(a):d&&(this.destination=G(b))}else 0!=b?(a.x+=b,S(this.g,a)&&(this.destination=G(a))):0!=c&&(a.y+=c,S(this.g,a)&&(this.destination=G(a)))}}ca(a){a.drawImage(this.s,this.j.x-this.s.w/2,this.j.y-this.s.u/2)}}
class T{constructor(a,b){this.g=a;this.j=G(b);this.s=H("E",f,1.1);this.N=1}update(){}ca(a){a.drawImage(this.s,this.j.x-this.s.w/2,this.j.y-this.s.u/2)}}class qb extends T{constructor(a,b){super(a,b);this.s=H("\ud83c\udfc6",f,1.1)}update(){N(this.g.i.j,this.j)<f&&rb(this.g)}}
class sb extends T{constructor(a,b){super(a,b);this.s=H("\ud83c\udf6a",.8*f,1.1);this.rotation=0;this.F=[H("\ud83c\udf6a",.8*f,1.1),H("\ud83c\udf6a",.7*f,1.1),H("\ud83c\udf6a",.6*f,1.1),H("\ud83c\udf6a",.5*f,1.1),H("\ud83c\udf6a",.6*f,1.1),H("\ud83c\udf6a",.7*f,1.1)];this.o=0;this.P=10}update(){this.rotation++;this.o++;360<this.rotation&&(this.rotation=0);this.s=this.F[v(this.o/this.P)];this.rotation;this.o>(this.F.length-1)*this.P&&(this.o=0);this.g&&this.g.i&&N(this.j,this.g.i.j)<f/2&&(this.g.ba+=
1,this.g.v=this.g.v.filter(a=>a!=this))}}
class tb extends T{constructor(a,b){super(a,b);this.s=H("\ud83d\udc93",.8*f,1.1);this.F=[H("\ud83d\udc93",.8*f,1.1),H("\ud83d\udc93",.7*f,1.1),H("\ud83d\udc93",.6*f,1.1),H("\ud83d\udc93",.5*f,1.1),H("\ud83d\udc93",.6*f,1.1),H("\ud83d\udc93",.7*f,1.1)];this.o=0;this.P=10}update(){this.o++;this.s=this.F[v(this.o/this.P)];this.rotation;this.o>(this.F.length-1)*this.P&&(this.o=0);this.g&&this.g.i&&N(this.j,this.g.i.j)<f/2&&(this.g.i.N+=20,this.g.v=this.g.v.filter(a=>a!=this))}}
class ub extends T{constructor(a,b){super(a,b);this.s=H("\u231b",.8*f,1.1);this.F=[H("\u231b",.8*f,1.1),H("\u231b",.7*f,1.1),H("\u231b",.6*f,1.1),H("\u231b",.5*f,1.1),H("\u231b",.6*f,1.1),H("\u231b",.7*f,1.1)];this.o=0;this.P=10}update(){this.o++;this.s=this.F[v(this.o/this.P)];this.rotation;this.o>(this.F.length-1)*this.P&&(this.o=0);this.g&&this.g.i&&N(this.j,this.g.i.j)<f/2&&(this.g.ta+=15,this.g.v=this.g.v.filter(a=>a!=this))}}
function gb(a){a.J=!0;a.R=!0;null!=a.m&&a.m.remove();a.m=Object.assign(document.createElement("div"),{className:"menuDialog"});a.m.style.width=`${u*f}px`;a.m.style.height=`${q*f*.8}px`;a.m.innerHTML="<h1>Game Over</h1>";a.Ia&&(a.m.innerHTML="<h2>Time Up</h2>");var b=J('<button id="nextLevel"><h2>New Game</h2></button>');b.style.width=`${u*f*.9}px`;b.onclick=()=>{vb(a)};a.m.append(b);a.body.append(a.m)}function hb(a){return{x:a.x*f+f/2,y:a.y*f+f/2}}
function S(a,b){try{if(0>b.x||0>b.y||b.x>a.buffer.w||b.y>a.buffer.u)return!1;var c=Math.floor(b.y/f),d=Math.floor(b.x/f);return 0<=c&&0<=d?!a.Ca.grid[c][d]:!1}catch(e){return console.log(e),!1}}
function rb(a){a.J=!0;null!=a.m&&a.m.remove();a.m=Object.assign(document.createElement("div"),{className:"menuDialog"});a.m.innerHTML=`<h1>Well Done<h1><h2> Level ${a.level} finished</h2>`;var b=J('<button id="nextLevel"><h3>Next Level</h3></button>');b.onclick=()=>{wb(a,a.level+1)};a.m.append(b);a.body.append(a.m)}
function xb(a){a.ea=J("<div class='layout'></div>");a.za=J("<div class='header'></div>");a.body=J("<div class='body'></div>");a.da=J("<div class='footer'></div>");a.ea.appendChild(a.za);a.ea.appendChild(a.body);a.ea.appendChild(a.da);document.body.innerHTML="";document.body.appendChild(a.ea)}function yb(a){var b=J("<div>Loading....</div>");a.body.append(b)}function zb(a){a.R=!0;a.J=!0;xb(a);var b=z(u*f,q*f);b.fill("#000");Ab(a,b);a.body.append(b);U(a)}
function U(a){a.J=!0;null!=a.m&&a.m.remove();a.m=Object.assign(document.createElement("div"),{className:"menuDialog"});var b=[];a.R?b.push({G:"<button >New Game</button>",f:"newgame"}):b.push({G:"<button >Resume</button>",f:"resume"});b.push(...[{G:"<button >Help</button>",f:"help"},{G:`<button >Music ${a.M.ga?"ON":"OFF"}</button>`,f:"music"},{G:`<button >Controls ${a.M.controls?"ON":"OFF"}</button>`,f:"controls"}]);a.R||b.push({G:"<button >Quit</button>",f:"quit"});var c=C(b.length,1);for(let e in b){var d=
J(b[e].G);d.style.width=`${u*f*.9}px`;d.style.fontSize="24pt";c.U[e][0].append(d);c.U[e][0].onclick=()=>{Bb(a,b[e].f)}}a.m.append(c);a.body.append(a.m)}
function Cb(a){var b=C(2,6);b.style.width=u*f+"px";var c=b.U;a.Ba=document.createElement("div");a.xa=document.createElement("div");a.Ha=document.createElement("div");a.qa=document.createElement("div");c[0][0].append(H("\ud83c\udf6a",32,1.4));c[1][0].append(a.xa);c[0][1].append(H("\ud83d\udc93",32,1.4));c[1][1].append(a.qa);c[0][2].append(H("\u231b",32,1.4));c[1][2].append(a.Ha);c[0][4].append("Level");c[1][4].append(a.Ba);c[0][5].rowSpan=2;c[0][5].append(H("\ud83d\udccb",40,1.4));c[1][5].remove();
c[0][5].onclick=()=>{U(a)};a.za.append(b)}
function Db(a){if(0==a.M.controls)a.da.innerHTML="";else{a.da.innerHTML="";var b=C(2,3);b.classList.add("gamecontrolstable");b.style.width=u*f+"px";var c=b.U;[{G:"<span> <h1>w</h1> </span>",f:"w",r:0,c:1},{G:"<span> <h1>s</h1> </span>",f:"s",r:1,c:1},{G:"<span> <h1>a</h1> </span>",f:"a",r:0,c:0},{G:"<span> <h1>d</h1> </span>",f:"d",r:0,c:2}].forEach(d=>{var e=J(d.G);c[d.r][d.c].addEventListener("touchstart",()=>lb(a.i.keys,d.f));c[d.r][d.c].addEventListener("touchend",()=>kb(a.i.keys,d.f));c[d.r][d.c].addEventListener("mousedown",
()=>lb(a.i.keys,d.f));c[d.r][d.c].addEventListener("mouseup",()=>kb(a.i.keys,d.f));c[d.r][d.c].append(e);c[d.r][d.c].style.border="2px solid black";c[d.r][d.c].style.background="blue";c[d.r][d.c].style.color="#fff"});c[0][2].rowSpan=2;c[1][2].remove();c[0][0].rowSpan=2;c[1][0].remove();a.da.appendChild(b)}}
function Ab(a,b){function c(n){b.fill("#000");b.La(e);d.fillStyle="#fff";d.fillText(n,20,20);k.forEach(m=>{d.drawImage(g,m.x,m.y);m.y+=$a(1,f/4);m.y>b.u&&(m.y=-f)});p.forEach(m=>{m.x>b.w&&(m.x=m.ma);m.x++;var w=m.$[Math.floor(m.T/m.aa)];m.T++;m.T>(m.$.length-1)*m.aa&&(m.T=0);d.drawImage(w,m.x,m.y)});1E4<n||(requestAnimationFrame(m=>c(m)),setTimeout(()=>{},500))}var d=b.h,e=Ca("#2d7d00","#509e26",.1,f,f),g=za(),k=[];for(var h=0;50>h;h++)k.push({x:$a(g.w/2,b.w),y:-$a(f,4*f)});h=b.u-f;var l=a.Z.V,p=
[{ma:-f,x:b.w+1,y:h,T:0,aa:10,$:a.Z.Fa},{ma:2*-f,x:b.w+1,y:h,T:0,aa:10,$:l},{ma:3*-f,x:b.w+1,y:h,T:0,aa:10,$:l}];c(0)}
function Bb(a,b){if("newgame"==b)a.J=!1,a.R=!1,vb(a);else if("resume"==b)a.J=!1,a.m.remove(),a.update(a.time);else if("controls"==b)a.M.controls=!a.M.controls,Db(a),U(a),a.update(a.time);else if("music"==b)a.ia||(a.ia=new qa),a.M.ga?ha(a.ia):fa(a.ia),a.M.ga=!a.M.ga,a.m.remove(),U(a);else if("quit"==b)document.webkitIsFullScreen&&document.exitFullscreen(),a.J=!0,a.R=!0,a.m.remove(),zb(a);else if("help"==b){a.J=!0;null!=a.m&&a.m.remove();a.m=Object.assign(document.createElement("div"),{className:"menuDialog"});
a.m.style.width=`${u*f}px`;b=J("<button>Menu</button>");b.onclick=()=>{a.J=!1;a.m.remove();U(a)};a.m.innerHTML+='\n                <div class="helpDiv">\n                    <h2>Help</h2>\n                    <p>You are trapped in a maze </p>\n                    <p>Gather cookies (\ud83c\udf6a) and avoid the walking thirteens</p>\n                    <p>After Collecting all cookies find (\ud83c\udfc6) to finish level</p>\n                    <p>you have only 13 minutes to finish the maze</p>\n                    <p>if a thirteen catch up to you it will take from your life</p>\n                    <p>collect hearts(\ud83d\udc93) to extend your life</p>\n                    <p>collect time(\u231b) to extend your time</p>\n                    <p></p>\n                    <p></p>\n                </div>\n            ';
var c=a.m.querySelector(".helpDiv");c.style["overflow-y"]="auto";c.style.height=q*f*.8+"px";a.m.append(b);a.body.append(a.m)}}
function wb(a,b){a.ba=0;a.ta=780;a.Ia=!1;a.R=!1;a.J=!1;a.level=b;a.Ba.innerHTML=a.level;b=20+5*a.level;var c=20+5*a.level;a.v=[];nb(a.i,a.sa);a.Ca=new ta(c,b);a.O=a.Ca.grid;a.Pa=new xa(a.O);a.ja=null;a.Ra=new jb(a,a.sa);a.v=[a.i,a.Ra];let d=[],e=[];for(var g=0;g<b;g++)for(var k=0;k<c;k++)1==a.O[g][k]&&.3>Math.random()&&(a.O[g][k]=!1);for(g=0;g<b;g++)for(k=0;k<c;k++)if(0==a.O[g][k])if(0==g||0==a.O[g-1][k]||g==b-1||0==a.O[g+1][k]||0==k||0==a.O[g][k-1]||k==c-1||0==a.O[g][k+1]){var h=hb({x:k,y:g});.3>
Math.random()?(h=new sb(a,h),d.push(h)):.01>Math.random()?(h=new tb(a,h),a.v.push(h)):.005>Math.random()?(h=new ub(a,h),a.v.push(h)):e.push(h)}else console.log("trapped point");a.Xa=Aa(e);d=Aa(d);d=d.splice(0,Math.min(13*a.level,d.length-5));a.Aa=d.length;a.v.push(...d);a.Na=Eb(b,c,a.O);a.buffer=z(b*f,c*f);a.canvas=z(u*f,q*f);a.body.innerHTML="";a.body.appendChild(a.canvas);a.body.appendChild(a.Ma);a.update(0);a.K=null;a.canvas.addEventListener("mousedown",l=>{a.K=Fb(a,l.touches?l.touches[0]:l)});
a.canvas.addEventListener("mouseup",()=>{a.K=null;a.i.keys=new R});a.canvas.addEventListener("mousemove",l=>Gb(a,l));a.canvas.addEventListener("touchstart",l=>{a.K=Fb(a,l.touches?l.touches[0]:l)});a.canvas.addEventListener("touchend",()=>{a.K=null;a.i.keys=new R});a.canvas.addEventListener("touchmove",l=>Gb(a,l))}
function vb(a){xb(a);Cb(a);Db(a);a.va=window.innerHeight/window.innerWidth;1<a.va&&(f=32,q=12,u=Math.floor(window.innerWidth/f));a.sa=G({x:f/2,y:f/2});a.i=new pb(a,a.sa);a.v=[];a.level=1;wb(a,a.level);window.addEventListener("keyup",b=>{"Escape"==b.key&&U(a)})}
function Eb(a,b,c){var d=f,e=Ca("#2d7d00","#509e26",.1,d,d);Ca("#924200","#3d1c00",.01,d,d);var g=f/8;var k=z(8,8),h=k.h;h.fillStyle="#BC4A3C";h.fillRect(0,0,k.width,k.height);h.fillStyle="black";h.fillRect(7,0,1,4);h.fillRect(0,3,8,1);h.fillRect(4,4,1,4);h.fillRect(0,7,8,1);g=1<g?Ba(k,g,g):k;d=z(b*d,a*d);k=d.h;for(let p=0;p<a;p++){h=c[p];for(let n=0;n<b;n++){var l=0==h[n]?e:g;k.drawImage(l,n*l.width,p*l.height)}}return d}
function Gb(a,b){if(a.K){var c=Fb(a,b.touches?b.touches[0]:b);a.ua=c;b=c.x-a.K.x;c=c.y-a.K.y;Math.sqrt(b*b+c*c)>a.B&&(a.i.keys.d=b>a.B,a.i.keys.a=b<-a.B,a.i.keys.w=c<-a.B,a.i.keys.A=c>a.B,Math.abs(b)>a.B&&Math.abs(c)>a.B&&(b>a.B&&c<-a.B&&(a.i.keys.d=!0,a.i.keys.w=!0),b<-a.B&&c<-a.B&&(a.i.keys.a=!0,a.i.keys.w=!0),b<-a.B&&c>a.B&&(a.i.keys.a=!0,a.i.keys.A=!0),b>a.B&&c>a.B&&(a.i.keys.d=!0,a.i.keys.A=!0)))}}
function Fb(a,b){a=a.canvas.getBoundingClientRect();return{x:b.clientX-a.left+window.scrollX,y:b.clientY-a.top+window.scrollY}}function Hb(a){a.buffer.clear();a.buffer.h.drawImage(a.Na,0,0);a.v.sort((e,g)=>{let k,h;return e.j?null==(k=e.j)?void 0:k.y:Infinity-g.j?null==(h=g.j)?void 0:h.y:Infinity});a.v.forEach(e=>e.ca(a.buffer.h));var b=a.canvas.w,c=a.canvas.u,d=ob(a.i,b,c);return M(a.buffer,d.x,d.y,b,c)}
function Ib(a){let b=Math.floor(a/60),c=Math.floor(b/60);b=Math.floor(b%60);a=Math.floor(a%60);return`${0==c?"":10>c?`0${c}:`:`${c}:`}${0==b?"":10>b?`0${b}:`:`${b}:`}${a}`}
class Jb{constructor(){this.M={ga:!1,cb:!1,bb:1,Wa:1,controls:!1};xb(this);yb(this);this.B=f/4;this.ra=Da(3*this.B);this.va=window.innerHeight/window.innerWidth;1<this.va&&(f=32);q=Math.floor(window.innerHeight/f)-.5;u=Math.floor(window.innerWidth/f)-.5;this.Ma=document.createElement("div");document.body.innerHTML="";Wa(a=>{this.Z=new eb(a);db();this.v=[];zb(this)})}ka(a,b){return this.Pa.ka(a.y/f,a.x/f,b.y/f,b.x/f)}update(a){if(1==this.R)return gb(this);var b=this.ta-parseInt(a/1E3);this.Ha.innerHTML=
`${Ib(b)}`;0>=b&&(1==this.R,1==this.Ia,gb(this));if(1!=this.J){this.qa.innerHTML=`${this.i.N}`;this.xa.innerHTML=`${this.ba}/${this.Aa}`;this.ba==this.Aa&&null==this.ja&&(this.ja=new qb(this,this.Xa[0]),this.v.push(this.ja));for(let c=0;c<this.M.Wa;c++)this.v.forEach(d=>d.update(a+1E3*c));b=Hb(this);this.canvas.clear();this.canvas.h.drawImage(b,0,0);this.K&&(this.canvas.h.drawImage(this.ra,this.K.x-this.ra.w/2,this.K.y-this.ra.u/2),this.ua&&this.canvas.h.fillRect(this.ua.x,this.ua.y,2,2));this.time=
a;requestAnimationFrame(c=>this.update(c))}}}document.addEventListener("DOMContentLoaded",function(){window.g=new Jb},!1);
